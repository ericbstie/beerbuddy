# Auth mutations
mutation Signup($email: String!, $password: String!, $name: String, $nickname: String) {
	signup(email: $email, password: $password, name: $name, nickname: $nickname) {
		token
		user {
			id
			email
			name
			nickname
			bio
			profilePicture
		}
	}
}

mutation Login($email: String!, $password: String!) {
	login(email: $email, password: $password) {
		token
		user {
			id
			email
			name
			nickname
			bio
			profilePicture
		}
	}
}

query Me {
	me {
		id
		email
		name
		nickname
		bio
		profilePicture
		followerCount
		followingCount
		totalBeersCount
		totalPostsCount
		createdAt
		updatedAt
	}
}

query Profile($id: Int!) {
	user(id: $id) {
		id
		email
		name
		nickname
		bio
		profilePicture
		followerCount
		followingCount
		totalBeersCount
		totalPostsCount
		createdAt
		updatedAt
	}
}

mutation UpdateProfile($nickname: String, $bio: String, $profilePicture: String) {
	updateProfile(nickname: $nickname, bio: $bio, profilePicture: $profilePicture) {
		id
		email
		name
		nickname
		bio
		profilePicture
		followerCount
		followingCount
		totalBeersCount
		totalPostsCount
		createdAt
		updatedAt
	}
}

query Posts($limit: Int, $cursor: Int, $feed: Boolean) {
	posts(limit: $limit, cursor: $cursor, feed: $feed) {
		posts {
			id
			title
			description
			beersCount
			imageUrl
			authorId
			likesCount
			isLiked
			author {
				id
				email
				name
				nickname
				bio
				profilePicture
				createdAt
				updatedAt
			}
			createdAt
			updatedAt
		}
		hasMore
		cursor
	}
}

query PostComments($postId: Int!) {
	postComments(postId: $postId) {
		postId
		comments {
			id
			text
			userId
			postId
			user {
				id
				email
				name
				nickname
				bio
				profilePicture
				createdAt
				updatedAt
			}
			createdAt
			updatedAt
		}
	}
}

mutation CreatePost($title: String!, $description: String, $beersCount: Int!, $imageUrl: String!) {
	createPost(title: $title, description: $description, beersCount: $beersCount, imageUrl: $imageUrl) {
		id
		title
		description
		beersCount
		imageUrl
		authorId
		likesCount
		isLiked
		author {
			id
			email
			name
			nickname
			bio
			profilePicture
			createdAt
			updatedAt
		}
		createdAt
		updatedAt
	}
}

mutation DeletePost($id: Int!) {
	deletePost(id: $id)
}

mutation ToggleLike($postId: Int!) {
	toggleLike(postId: $postId) {
		id
		likesCount
		isLiked
	}
}

mutation CreateComment($postId: Int!, $text: String!) {
	createComment(postId: $postId, text: $text) {
		id
		text
		userId
		postId
		user {
			id
			email
			name
			nickname
			bio
			profilePicture
			createdAt
			updatedAt
		}
		createdAt
		updatedAt
	}
}

mutation DeleteComment($id: Int!) {
	deleteComment(id: $id)
}

query Followers($userId: Int!) {
	followers(userId: $userId) {
		followers {
			id
			email
			name
			nickname
			bio
			profilePicture
			createdAt
			updatedAt
		}
		totalCount
	}
}

query Following($userId: Int!) {
	following(userId: $userId) {
		following {
			id
			email
			name
			nickname
			bio
			profilePicture
			createdAt
			updatedAt
		}
		totalCount
	}
}

query IsFollowing($followerId: Int!, $followingId: Int!) {
	isFollowing(followerId: $followerId, followingId: $followingId)
}

mutation FollowUser($userId: Int!) {
	followUser(userId: $userId)
}

mutation UnfollowUser($userId: Int!) {
	unfollowUser(userId: $userId)
}
